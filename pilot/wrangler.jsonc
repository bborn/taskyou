{
  "$schema": "node_modules/wrangler/config-schema.json",
  "name": "taskyou-pilot",
  "main": "worker-entry.js",
  "compatibility_date": "2025-12-01",
  "compatibility_flags": ["nodejs_compat"],
  "assets": {
    "directory": ".svelte-kit/cloudflare",
    "binding": "ASSETS"
  },
  "workflows": [
    {
      "name": "task-execution",
      "binding": "TASK_WORKFLOW",
      "class_name": "TaskExecutionWorkflow"
    }
  ],
  "containers": [
    {
      "class_name": "Sandbox",
      "image": "./Dockerfile.sandbox",
      "instance_type": "lite",
      "max_instances": 5
    }
  ],
  "durable_objects": {
    "bindings": [
      {
        "name": "TASKYOU_AGENT",
        "class_name": "TaskYouAgent"
      },
      {
        "name": "SANDBOX",
        "class_name": "Sandbox"
      }
    ]
  },
  "migrations": [
    {
      "tag": "v1",
      "new_sqlite_classes": ["Sandbox"]
    },
    {
      "tag": "v2",
      "new_sqlite_classes": ["TaskYouAgent"]
    }
  ],
  "d1_databases": [
    {
      "binding": "DB",
      "database_name": "taskyou-pilot-db",
      "database_id": "00fd9e62-cb4c-411a-a1ca-6e3777cba0fd"
    }
  ],
  "kv_namespaces": [
    {
      "binding": "SESSIONS",
      "id": "97030b57bfd9439cad190747ad778b81"
    }
  ],
  "vars": {
    "ENVIRONMENT": "production"
  },
  // Secrets (set via `wrangler secret put`):
  // ANTHROPIC_API_KEY, GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET,
  // GITHUB_CLIENT_ID, GITHUB_CLIENT_SECRET
  "r2_buckets": [
    {
      "binding": "STORAGE",
      "bucket_name": "taskyou-pilot-storage"
    }
  ]
}
